<!DOCTYPE html>
<html lang="en" data-i18n="events_manager">
	<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wesnoth Events Manager</title>
		<script src="../scripts/wesnoth-wml-utils.js"></script>
		<script src="../scripts/main.js"></script>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/events_manager.css">
    <script src="../scripts/i18n.js"></script>
	</head>
	<body class="wts-index-body">
    <header class="wts-index-header">
        <nav class="wts-index-nav">
            <div>
                <button id="wts-index-dashboard" class="wts-index-tooltip">Dashboard</button>
                <div class="wts-index-dropdown">
                    <button id="wts-index-tools" class="wts-index-tooltip wts-index-dropbtn">Tools</button>
                    <div class="wts-index-dropdown-content">
                        <a href="#">Events Manager</a>
                        <a href="#">Unit Editor</a>
                        <a href="#">Scenario Builder</a>
                        <a href="#">WML Validator</a>
                        <a href="#">Story Manager</a>
                    </div>
                </div>
                <button id="wts-index-community" class="wts-index-tooltip">Community</button>
                <button id="wts-index-documentation" class="wts-index-tooltip">Documentation</button>
                <button id="wts-index-about" class="wts-index-tooltip">About</button>
            </div>
            <div class="wts-index-nav-right">
                <button id="wts-theme-toggle" class="wts-index-tooltip" title="Toggle theme">
                    <svg class="svg-icon" viewBox="0 0 24 24">
                        <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0-18a8 8 0 1 1 0 16 8 8 0 0 1 0-16z"/>
                    </svg>
                </button>
                <div class="wts-index-dropdown">
                    <button id="wts-index-languages" class="wts-index-tooltip wts-index-dropbtn">Languages</button>
                    <div class="wts-index-dropdown-content">
                        <a href="#">English</a>
                        <a href="#">Français</a>
                        <a href="#">Deutsch</a>
                        <a href="#">Español</a>
                        <a href="#">Italiano</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    
    <div class="manager-event-container">
        <header class="manager-event-header">
            <h1>
                <svg class="svg-icon" viewBox="0 0 640 512">
                    <path d="M496 224h-48v-48c0-8.8-7.2-16-16-16h-48V96c0-8.8-7.2-16-16-16H112c-8.8 0-16 7.2-16 16v48H48c-8.8 0-16 7.2-16 16v48H16c-8.8 0-16 7.2-16 16v128c0 8.8 7.2 16 16 16h80V320h32v128h64V320h32v128h64V320h32v128h80c8.8 0 16-7.2 16-16V256c0-8.8-7.2-16-16-16zm-48 176h-32V320h32v80zm-96 0h-32V320h32v80zm-96 0h-32V320h32v80zm-96 0H80V320h32v80zm272-224h32v32h-32v-32zm-96 0h32v32h-32v-32zm-96 0h32v32h-32v-32zm-96 0h32v32H80v-32zm352-64v32h-32v-32h32zm-96 0v32h-32v-32h32zm-96 0v32h-32v-32h32zm-96 0v32H80v-32h32z"/>
                </svg>
                Wesnoth Events Manager
            </h1>
            <p>Extract, edit, and manage events and messages from Wesnoth scenario files</p>
        </header>
        
        <section class="manager-event-upload-section">
            <h2 class="manager-event-section-title">
                <svg class="svg-icon" viewBox="0 0 640 512">
                    <path d="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"/>
                </svg>
                Upload Files
            </h2>
            
            <div id="manager-event-dropZone" class="manager-event-drop-zone">
                <svg class="svg-icon" viewBox="0 0 512 512" style="width:48px;height:48px;">
                    <path d="M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"/>
                </svg>
                <h3>Drag & Drop scenario files here</h3>
                <p>or</p>
                <button id="manager-event-browseBtn" class="manager-event-btn">
                    <svg class="svg-icon" viewBox="0 0 576 512">
                        <path d="M572.6 270.3l-96 192C471.2 473.2 460.1 480 447.1 480H64c-35.35 0-64-28.65-64-64V96c0-35.35 28.65-64 64-64h117.5c16.97 0 33.25 6.742 45.26 18.75L275.9 96H416c35.35 0 64 28.65 64 64v32h-48V160c0-8.824-7.178-16-16-16H256L192.8 84.69C189.8 81.66 185.8 80 181.5 80H64C55.18 80 48 87.18 48 96v288l71.16-142.3C124.6 230.8 134.5 224 145.1 224h399.8C555.1 224 565.8 238.3 572.6 270.3z"/>
                    </svg>
                    Browse Files
                </button>
                <input type="file" id="manager-event-fileInput" accept=".cfg" multiple hidden>
            </div>
            
            <div class="manager-event-paste-section">
                <h3 class="manager-event-section-title">
                    <svg class="svg-icon" viewBox="0 0 512 512">
                        <path d="M502.6 278.6l-128 128c-12.51 12.51-32.76 12.49-45.25 0c-12.5-12.5-12.5-32.75 0-45.25L402.8 288H192C174.3 288 160 273.7 160 256s14.31-32 32-32h210.8l-73.38-73.38c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l128 128C515.1 245.9 515.1 266.1 502.6 278.6zM192 448c-17.67 0-32-14.33-32-32c0-17.67 14.33-32 32-32h192v-64H192c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h192V448H192zM160 192h192V128H160V192zM128 64h288V32c0-17.67-14.33-32-32-32H160C142.3 0 128 14.33 128 32V64zM96 96V64H32C14.33 64 0 78.33 0 96v64c0 17.67 14.33 32 32 32h64v128c0 17.67 14.33 32 32 32h64v-32H128V160h64v128h64V128H192v32H128V96H96z"/>
                    </svg>
                    Paste Content
                </h3>
                <textarea id="manager-event-pasteArea" placeholder="Paste WML content here..." rows="5"></textarea>
                <button id="manager-event-processPasteBtn" class="manager-event-btn">
                    <svg class="svg-icon" viewBox="0 0 640 512">
                        <path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/>
                    </svg>
                    Process Pasted Content
                </button>
            </div>
        </section>
        
        <section id="manager-event-resultsSection" class="manager-event-results-section manager-event-hidden">
            <div class="manager-event-controls">
                <div class="manager-event-view-controls">
                    <button id="manager-event-eventsViewBtn" class="manager-event-btn manager-event-active">Events View</button>
                    <button id="manager-event-messagesViewBtn" class="manager-event-btn">Messages View</button>
                </div>
                <div class="manager-event-mode-controls">
                    <button id="manager-event-groupFilesBtn" class="manager-event-btn manager-event-active">Group by File</button>
                    <button id="manager-event-combineFilesBtn" class="manager-event-btn">Combine All</button>
                </div>
            </div>
            
            <div class="manager-event-stats-panel" id="manager-event-statsPanel">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h3>Statistics</h3>
                    <button id="manager-event-statsToggleBtn" class="manager-event-btn">Hide Statistics</button>
                </div>
                <div class="manager-event-stat-grid">
                    <div class="manager-event-stat-card">
                        <div class="manager-event-stat-value" id="manager-event-statFiles">0</div>
                        <div class="manager-event-stat-label">Files Processed</div>
                    </div>
                    <div class="manager-event-stat-card">
                        <div class="manager-event-stat-value" id="manager-event-statEvents">0</div>
                        <div class="manager-event-stat-label">Total Events</div>
                    </div>
                    <div class="manager-event-stat-card">
                        <div class="manager-event-stat-value" id="manager-event-statMessages">0</div>
                        <div class="manager-event-stat-label">Total Messages</div>
                    </div>
                    <div class="manager-event-stat-card">
                        <div class="manager-event-stat-value" id="manager-event-statAvgEvents">0</div>
                        <div class="manager-event-stat-label">Avg Events/File</div>
                    </div>
                </div>
            </div>
            
            <div id="manager-event-eventsContainer"></div>
            <div id="manager-event-messagesContainer" class="manager-event-hidden"></div>
            
            <div class="manager-event-save-section" id="manager-event-saveSection">
                <div>You have unsaved changes. Would you like to save them before downloading?</div>
                <div>
                    <button id="manager-event-saveChangesBtn" class="manager-event-btn">Save Changes</button>
                    <button id="manager-event-discardChangesBtn" class="manager-event-btn manager-event-btn-warning">Discard</button>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="manager-event-clearResultsBtn" class="manager-event-btn manager-event-btn-warning">Clear Results</button>
                <button id="manager-event-downloadEditedBtn" class="manager-event-btn manager-event-btn-success">Download Edited Files</button>
            </div>
        </section>
        
        <div id="manager-event-emptyState" class="manager-event-empty-state">
            <svg class="svg-icon" viewBox="0 0 384 512" style="width:48px;height:48px;">
                <path d="M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"/>
            </svg>
            <h3>No Files Processed</h3>
            <p>Upload scenario files (.cfg) or paste WML content to get started</p>
        </div>
    </div>
    
    <div class="wts-content-container">
        <footer class="wts-index-footer">
            <div class="wts-index-footer-links">
                <a href="https://github.com/nadhem000/wesnoth-tools-helpers/tree/main">GitHub</a>
                <a href="https://forums.wesnoth.org/index.php">Forums</a>
                <a href="https://github.com/nadhem000/wesnoth-tools-helpers/issues">Report Issues</a>
            </div>
            <span>Wesnoth Campaign Tools Suite © 2025 | Created for Battle for Wesnoth developers</span>
        </footer>
    </div>
		
		<script src="../scripts/events_manager.js"></script>
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				const tooltips = document.querySelectorAll('.wts-manager-event-tooltip');
				tooltips.forEach(tooltip => {
					const key = tooltip.getAttribute('data-i18n');
					if (key) {
						tooltip.title = key.replace(/_/g, ' ');
					}
				});
			});
		</script>
	</body>
</html>