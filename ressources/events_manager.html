<!DOCTYPE html>
<html lang="en" data-i18n="events_manager">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title data-i18n="events_manager.title">Wesnoth Events Manager</title>
		<script src="wesnoth-wml-utils.js"></script>
		<link rel="stylesheet" href="styles/main.css"> <!-- Added main styles -->
		<link rel="stylesheet" href="events_manager.css">
	</head>
	<body class="wts-index-body">
		<!-- Updated Header -->
		<header class="wts-index-header">
			<nav class="wts-index-nav">
				<div>
					<button id="wts-index-dashboard" class="wts-index-tooltip" data-i18n="nav.dashboard">Dashboard</button>
					<!-- Tools Dropdown -->
					<div class="wts-index-dropdown">
						<button id="wts-index-tools" class="wts-index-tooltip wts-index-dropbtn active" data-i18n="nav.tools">Tools</button>
						<div class="wts-index-dropdown-content">
							<a href="events_manager.html" class="active" data-i18n="card.events_manager">Events Manager</a>
							<a href="ressources/sample.html" data-i18n="card.unit_editor">Unit Editor</a>
							<a href="ressources/sample.html" data-i18n="card.scenario_builder">Scenario Builder</a>
							<a href="ressources/sample.html" data-i18n="card.wml_validator">WML Validator</a>
						</div>
					</div>
					<button id="wts-index-community" class="wts-index-tooltip" data-i18n="nav.community">Community</button>
					<button id="wts-index-documentation" class="wts-index-tooltip" data-i18n="nav.documentation">Documentation</button>
					<button id="wts-index-about" class="wts-index-tooltip" data-i18n="nav.about">About</button>
				</div>
				<div class="wts-index-nav-right">
					<button id="wts-theme-toggle" class="wts-index-tooltip" title="Toggle theme">
						<svg viewBox="0 0 24 24" width="24" height="24">
							<path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0-18a8 8 0 1 1 0 16 8 8 0 0 1 0-16z"/>
						</svg>
					</button>
					<div class="wts-index-dropdown">
						<button id="wts-index-languages" class="wts-index-tooltip wts-index-dropbtn" data-i18n="nav.languages">Languages</button>
						<div class="wts-index-dropdown-content">
							<a href="#" data-lang="en" data-i18n="lang.en">English</a>
							<a href="#" data-lang="fr" data-i18n="lang.fr">Français</a>
							<a href="#" data-lang="de" data-i18n="lang.de">Deutsch</a>
							<a href="#" data-lang="es" data-i18n="lang.es">Español</a>
							<a href="#" data-lang="it" data-i18n="lang.it">Italiano</a>
						</div>
					</div>
				</div>
			</nav>
		</header>
		
		<div class="manager-event-container">
			<!-- Original content remains unchanged -->
			<header class="manager-event-header">
				<h1 data-i18n="events_manager.header.title">
					<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M10 2v2.26l-4 2.33V4H2v7h2v10h7v2h6v-2h7v-4h-9v-9h9V9h-9V2h-6zm12 11h-2v2h2v-2zm-7-5V4h2v4h-2z"/></svg>
					Wesnoth Events Manager
				</h1>
				<p data-i18n="events_manager.header.description">Extract, edit, and manage events and messages from Wesnoth scenario files</p>
			</header>
			
			<section class="manager-event-upload-section">
				<h2 class="manager-event-section-title" data-i18n="events_manager.upload.title">
					<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/></svg>
					Upload Files
				</h2>
				
				<div id="manager-event-dropZone" class="manager-event-drop-zone" title="" data-i18n="events_manager.upload.drop_zone">
					<svg class="manager-event-svg-icon" viewBox="0 0 24 24" style="width: 48px; height: 48px;"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/></svg>
					<h3 data-i18n="events_manager.upload.drop_text">Drag & Drop scenario files here</h3>
					<p data-i18n="events_manager.upload.or">or</p>
					<button id="manager-event-browseBtn" class="manager-event-btn wts-manager-event-tooltip" data-i18n="events_manager.upload.browse">
						<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"/></svg>
						Browse Files
					</button>
					<input type="file" id="manager-event-fileInput" accept=".cfg" multiple hidden>
				</div>
				
				<div class="manager-event-paste-section">
					<h3 class="manager-event-section-title" data-i18n="events_manager.paste.title">
						<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"/></svg>
						Paste Content
					</h3>
					<textarea id="manager-event-pasteArea" placeholder="Paste WML content here..." rows="5" 
                    data-i18n="events_manager.[placeholder]paste.placeholder"></textarea>
					<button id="manager-event-processPasteBtn" class="manager-event-btn wts-manager-event-tooltip" data-i18n="events_manager.paste.process">
						<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/></svg>
						Process Pasted Content
					</button>
				</div>
			</section>
			
			<section id="manager-event-resultsSection" class="manager-event-results-section manager-event-hidden">
				<div class="manager-event-controls">
					<div class="manager-event-view-controls">
						<button id="manager-event-eventsViewBtn" class="manager-event-btn manager-event-active wts-manager-event-tooltip" data-i18n="events_manager.view.events">
							<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"/></svg>
							Events View
						</button>
						<button id="manager-event-messagesViewBtn" class="manager-event-btn wts-manager-event-tooltip" data-i18n="events_manager.view.messages">
							<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17l-.59.59-.58.58V4h16v12zm-9-4h2v2h-2v-2zm0-6h2v4h-2V6z"/></svg>
							Messages View
						</button>
					</div>
					
					<div class="manager-event-mode-controls">
						<button id="manager-event-groupFilesBtn" class="manager-event-btn manager-event-active wts-manager-event-tooltip" data-i18n="events_manager.mode.group">
							<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/></svg>
							Group by File
						</button>
						<button id="manager-event-combineFilesBtn" class="manager-event-btn wts-manager-event-tooltip" data-i18n="events_manager.mode.combine">
							<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M16 4h-2c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h2c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM9.5 4H6.4C5.6 4 5 4.6 5 5.4v9.2c0 .8.6 1.4 1.4 1.4h3.1c.8 0 1.4-.6 1.4-1.4V5.4c0-.8-.6-1.4-1.4-1.4zm10 6h-2c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h2c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2zM9.5 14h-3c-.3 0-.5.2-.5.5v3c0 .3.2.5.5.5h3c.3 0 .5-.2.5-.5v-3c0-.3-.2-.5-.5-.5z"/></svg>
							Combine Files
						</button>
						<button id="manager-event-statsToggleBtn" class="manager-event-btn wts-manager-event-tooltip" data-i18n="events_manager.stats.toggle">
							<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M5 9.2h3V19H5V9.2zM10.6 5h2.8v14h-2.8V5zm5.6 8H19v6h-2.8v-6z"/></svg>
							Show Statistics
						</button>
					</div>
					
					<button id="manager-event-clearResultsBtn" class="manager-event-btn manager-event-btn-danger wts-manager-event-tooltip" data-i18n="events_manager.action.clear">
						<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
						Clear Results
					</button>
				</div>
				
				<div id="manager-event-statsPanel" class="manager-event-stats-panel manager-event-hidden">
					<h3 class="manager-event-section-title" data-i18n="events_manager.stats.title">
						<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M11 2v20c-5.07-.5-9-4.79-9-10s3.93-9.5 9-10zm2.03 0v8.99H22c-.47-4.74-4.24-8.52-8.97-8.99zm0 11.01V22c4.74-.47 8.5-4.25 8.97-8.99h-8.97z"/></svg>
						Statistics
					</h3>
					<div class="manager-event-stat-grid">
						<div class="manager-event-stat-card">
							<div class="manager-event-stat-value" id="manager-event-statFiles">0</div>
							<div class="manager-event-stat-label" data-i18n="events_manager.stats.files">Files Processed</div>
						</div>
						<div class="manager-event-stat-card">
							<div class="manager-event-stat-value" id="manager-event-statEvents">0</div>
							<div class="manager-event-stat-label" data-i18n="events_manager.stats.events">Total Events</div>
						</div>
						<div class="manager-event-stat-card">
							<div class="manager-event-stat-value" id="manager-event-statMessages">0</div>
							<div class="manager-event-stat-label" data-i18n="events_manager.stats.messages">Total Messages</div>
						</div>
						<div class="manager-event-stat-card">
							<div class="manager-event-stat-value" id="manager-event-statAvgEvents">0</div>
							<div class="manager-event-stat-label" data-i18n="events_manager.stats.avg_events">Avg Events/File</div>
						</div>
					</div>
					
					<h4 data-i18n="events_manager.stats.file_details">File Details</h4>
					<div id="manager-event-fileStatsList" class="manager-event-file-stats"></div>
				</div>
				
				<div id="manager-event-fileInfo">
					<h3 data-i18n="events_manager.results.summary">
						Processing <span id="manager-event-fileCount">0</span> files with 
						<span id="manager-event-totalEvents">0</span> events and 
						<span id="manager-event-totalMessages">0</span> messages
					</h3>
				</div>
				
				<div id="manager-event-eventsContainer"></div>
				<div id="manager-event-messagesContainer" class="manager-event-hidden"></div>
				
				<div id="manager-event-saveSection" class="manager-event-save-section manager-event-hidden">
					<div>
						<h3 data-i18n="events_manager.save.title">
							<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
							You have unsaved changes
						</h3>
						<p data-i18n="events_manager.save.description">Save or discard your changes before downloading</p>
					</div>
					<div>
						<button id="manager-event-discardChangesBtn" class="manager-event-btn manager-event-btn-danger wts-manager-event-tooltip" data-i18n="events_manager.save.discard">
							<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
							Discard Changes
						</button>
						<button id="manager-event-saveChangesBtn" class="manager-event-btn manager-event-btn-success wts-manager-event-tooltip" data-i18n="events_manager.save.save">
							<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/></svg>
							Save Changes
						</button>
					</div>
				</div>
				
				<div class="manager-event-download-section">
					<button id="manager-event-downloadEditedBtn" class="manager-event-btn manager-event-btn-warning wts-manager-event-tooltip" data-i18n="events_manager.action.download">
						<svg class="manager-event-svg-icon" viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
						Download Edited Files
					</button>
				</div>
			</section>
			
			<div id="manager-event-emptyState" class="manager-event-empty-state">
				<svg class="manager-event-svg-icon" viewBox="0 0 24 24" style="width: 48px; height: 48px;"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
				<h3 data-i18n="events_manager.empty.title">No Files Processed</h3>
				<p data-i18n="events_manager.empty.description">Upload scenario files (.cfg) or paste WML content to get started</p>
			</div>
		</div>
		
		<!-- Added Footer -->
		<footer class="wts-index-footer">
			<div class="wts-index-footer-links">
				<a href="https://github.com/nadhem000/wesnoth-tools-helpers/tree/main" class="wts-index-tooltip" data-i18n="footer.github">GitHub</a>
				<a href="https://forums.wesnoth.org/index.php" class="wts-index-tooltip" data-i18n="footer.forums">Forums</a>
				<a href="https://github.com/nadhem000/wesnoth-tools-helpers/issues" class="wts-index-tooltip" data-i18n="footer.report">Report Issues</a>
			</div>
			<span data-i18n="footer.copyright">Wesnoth Campaign Tools Suite © 2025 | Created for Battle for Wesnoth developers</span>
			<button id="wts-install-btn" class="wts-index-tooltip" data-i18n="install.button" style="display:none">Install App</button>
		</footer>
		
		<script src="scripts/main.js"></script> <!-- Added main JS -->
		<script src="events_manager.js"></script>
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				const tooltips = document.querySelectorAll('.wts-manager-event-tooltip');
				tooltips.forEach(tooltip => {
					const key = tooltip.getAttribute('data-i18n');
					if (key) {
						tooltip.title = key.replace(/_/g, ' ');
					}
				});
			});
		</script>
	</body>
</html>